<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restaurant POS</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <header class="app-header">
        <div class="brand">
            <h1 id="shopName">HOTEL SHAN</h1>
            <div class="sub">UPI: <span id="upiIdLabel">your-upi@bank</span></div>
        </div>
        <nav class="tabs" role="tablist">
            <button class="tab active" data-target="#menu">Menu</button>
            <button class="tab" data-target="#cart">Cart / Billing</button>
            <button class="tab" data-target="#reports">Reports</button>
            <button class="tab" data-target="#admin">Admin</button>
        </nav>
    </header>

    <main class="content">
        <section id="menu" class="panel active" aria-label="Menu">
            <div class="toolbar">
                <input id="menuSearch" type="search" placeholder="Search menu..." />
                <label class="chk">
                    <input id="onlyAvailable" type="checkbox" checked />
                    <span>Only available</span>
                </label>
            </div>
            <div id="menuGrid" class="menu-grid">
                <!-- Menu items render here -->
            </div>
        </section>

        <section id="cart" class="panel" aria-label="Cart and Billing">
            <div class="cart-wrap">
                <div class="cart-items" id="cartItems"></div>
                <div class="totals">
                    <div class="row"><span>Subtotal</span><span id="subtotal">₹0.00</span></div>
                    <div class="row"><span>Tax</span><span id="tax">₹0.00</span></div>
                    <div class="row grand"><span>Total</span><span id="grandTotal">₹0.00</span></div>
                    <div class="actions">
                        <button id="clearCartBtn" class="btn secondary">Clear Cart</button>
                        <button id="payNowBtn" class="btn">Pay Now (UPI)</button>
                        <button id="printBtn" class="btn">Print Bill</button>
                        <button id="completeSaleBtn" class="btn primary">Complete Sale</button>
                    </div>
                </div>
            </div>

            <!-- Hidden printable receipt -->
            <section id="receipt" aria-label="Receipt">
                <div class="receipt-header">
                    <div class="shop-name" id="receiptShopName">My Restaurant</div>
                    <div class="shop-address" id="receiptShopAddress">Address line</div>
                    <div class="receipt-meta">
                        <span id="receiptDate">Date</span>
                    </div>
                </div>
                <div class="receipt-body" id="receiptBody"></div>
                <div class="receipt-totals">
                    <div class="row"><span>Subtotal</span><span id="receiptSubtotal">₹0.00</span></div>
                    <div class="row"><span>Tax</span><span id="receiptTax">₹0.00</span></div>
                    <div class="row grand"><span>Total</span><span id="receiptTotal">₹0.00</span></div>
                </div>
                <div class="receipt-footer">Thank you! Visit again.</div>
            </section>
        </section>

        <section id="reports" class="panel" aria-label="Reports">
            <div class="report-controls">
                <select id="reportMonth"></select>
                <select id="reportYear"></select>
                <button id="runReportBtn" class="btn">Run</button>
                <button id="exportCsvBtn" class="btn secondary">Export CSV</button>
            </div>
            <div class="report-summary" id="reportSummary"></div>
            <div class="report-table-wrap">
                <table class="report-table" id="reportTable">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Orders</th>
                            <th>Revenue (₹)</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>

        <section id="admin" class="panel" aria-label="Admin">
            <div class="admin-layout">
                <aside class="admin-sidebar">
                    <div class="admin-section-title">Admin</div>
                    <button class="admin-tab active" data-admin-target="#admin-pay">Payment Settings</button>
                    <button class="admin-tab" data-admin-target="#admin-menu">Menu Manager</button>
                </aside>
                <div class="admin-content">
                    <div id="admin-pay" class="admin-pane active">
                        <form id="upiForm" class="card form">
                            <h3>Payment Settings</h3>
                            <div class="grid-2">
                                <label>UPI ID<input id="adminUpiId" placeholder="your-upi@bank" required /></label>
                                <label>QR Image URL<input id="adminQrUrl"
                                        placeholder="https://example.com/qr.png" /></label>
                            </div>
                            <div class="form-actions">
                                <button class="btn primary" id="saveUpiBtn">Save</button>
                            </div>
                            <div class="note">If QR URL is empty, a QR is generated from the UPI ID.</div>
                        </form>
                    </div>
                    <div id="admin-menu" class="admin-pane">
                        <div class="card">
                            <div class="admin-toolbar">
                                <div class="title">Menu Manager</div>
                                <input id="adminSearch" class="admin-search" type="search"
                                    placeholder="Search items..." />
                            </div>
                            <div class="admin-split">
                                <form id="addItemForm" class="form">
                                    <h4>Add / Edit Item</h4>
                                    <input type="hidden" id="editItemId" />
                                    <div class="form-grid">
                                        <label class="field"><span>Name</span><input id="itemName" required /></label>
                                        <label class="field"><span>Price (₹)</span><input id="itemPrice" type="number" step="0.01" min="0" required /></label>
                                        <label class="field full"><span>Image URL</span><input id="itemImageUrl" placeholder="https://..." /></label>
                                        <div class="field full">
                                            <span>Upload Image (camera/gallery)</span>
                                            <div class="upload-row">
                                                <input id="itemImageFile" type="file" accept="image/*" capture="environment" />
                                                <button type="button" class="btn secondary" id="applyImageBtn">Apply Image</button>
                                                <img id="itemImagePreview" alt="Preview" class="img-preview" src="assets/menu/placeholder.svg" />
                                            </div>
                                        </div>
                                        <label class="chk full" style="margin-top:4px">
                                            <input id="itemAvailable" type="checkbox" checked />
                                            <span>Available</span>
                                        </label>
                                    </div>
                                    <div class="form-actions">
                                        <button class="btn primary" id="saveItemBtn">Save Item</button>
                                        <button class="btn secondary" id="resetItemBtn" type="reset">Reset</button>
                                    </div>
                                </form>
                                <div class="table-wrap">
                                    <table class="admin-table" id="adminTable">
                                        <thead>
                                            <tr>
                                                <th class="col-img">Image</th>
                                                <th>Name</th>
                                                <th class="col-price">Price</th>
                                                <th class="col-avail">Avail</th>
                                                <th class="col-actions">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- QR Modal -->
    <dialog id="qrModal" class="modal">
        <div class="modal-content">
            <h3>Pay via UPI</h3>
            <div class="qr-wrap">
                <img id="upiQrImg" src="assets/qr/upi.svg" alt="UPI QR" />
                <div class="upi-id">UPI ID: <span id="upiIdModal">your-upi@bank</span></div>
                <div class="note">Please confirm payment manually.</div>
            </div>
            <div class="modal-actions">
                <button class="btn" id="closeQrBtn">Close</button>
            </div>
        </div>
    </dialog>

    <!-- Delete Confirm Modal -->
    <dialog id="confirmModal" class="modal">
        <div class="modal-content">
            <h3>Confirm Delete</h3>
            <p>Are you sure you want to delete this item?</p>
            <div class="modal-actions">
                <button class="btn secondary" id="cancelDeleteBtn">Cancel</button>
                <button class="btn danger" id="confirmDeleteBtn">Delete</button>
            </div>
        </div>
    </dialog>

    <div id="toast" class="toast" role="status" aria-live="polite"></div>

    <script src="app.js"></script>
    <noscript>Please enable JavaScript to use this app.</noscript>

</body>

</html>